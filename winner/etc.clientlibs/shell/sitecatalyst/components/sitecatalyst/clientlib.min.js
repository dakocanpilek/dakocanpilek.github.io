(function(){var g="#sitecatalyst-page-data";
var e="[not set]";
var d=/google|bing|yahoo/;
var f="shell/sitecatalyst/components/sitecatalyst";
var a="error-page";
var b={VISITOR_EXPIRY:365,VISITOR_ENGAGED:"shell_metrics_visitor_engaged",VISITOR_CONVERTED:"shell_metrics_visitor_converted",VISIT_EXPIRY:0,};
var h={};
h.name="siteCatalyst";
h.data={};
h.fireEvents=function(l,c){var m=[];
var n={};
if($.isArray(l)===false){h.log("Invalid events argument: "+l);
return
}var k=[];
for(var j=0;
j<l.length;
++j){var o=l[j];
if(o.indexOf("video")!==0){k.push(o);
continue
}n={};
n.event=o;
n.values=c;
n.collect=false;
n.componentPath=f;
CQ_Analytics.record(n)
}if($.inArray("engagement",k)!==-1){k.push("engagedVisit");
if(h.setCookie(b.VISITOR_ENGAGED,b.VISITOR_EXPIRY)){k.push("engagedVisitor")
}}if($.inArray("conversion",k)!==-1){k.push("convertedVisit");
if(h.setCookie(b.VISITOR_CONVERTED,b.VISITOR_EXPIRY)){k.push("convertedVisitor")
}}if(k.length>0){n={};
n.event=k;
n.values=c||{};
n.values.a={};
n.values.a.media={};
n.collect=false;
n.componentPath=f;
CQ_Analytics.record(n)
}};
h.log=function(c){shell.log("[sitecatalyst] "+c)
};
h.getInitProp=function(c){return CQ_Analytics.PageDataMgr.getInitProperty(c)
};
h.getMediaMilestones=function(){var j=h.getInitProp("mediaMilestones");
if(!j){return
}for(var c=0;
c<j.length;
++c){j[c]=parseInt(j[c],10)
}h.milestones=j
};
h.obtainDataFromReferrer=function(){var i=shell.getParams(document.referrer);
var c=i.get("q");
h.data.referrer=document.referrer;
if(document.referrer.search(/shell/)!==-1&&c){h.data.internalSearchQuery=c
}else{if(document.referrer.search(d)!==-1){if(c){h.data.externalSearchQuery=c
}else{h.data.externalSearchQuery=e
}}else{if(c){h.data.externalSearchQuery=c
}}}};
h.obtainDataFromURL=function(){var c=shell.getParams(document.location.href);
if(!c){return
}h.data.cid=c.get("cid")||c.get("utm_campaign");
h.data.hostName=document.location.hostname
};
h.obtainDataFromPlugins=function(){h.data.previousPageName=s.getPreviousValue(h.data.pageName,"gpv_pn");
if(h.data.previousPageName&&h.data.previousPageName!=="no value"){h.data.percentPageViewed=s.getPercentPageViewed()
}h.data.newRepeat=s.getNewRepeat(30,"s_getNewRepeat");
h.data.visitNumber=s.getVisitNum();
h.data.timeParting=s.getTimeParting("n","0");
h.data.pageLoadTime=s.getPageLoadTime();
s._tpDST={2013:"3/31,10/27",2014:"3/30,10/26",2015:"3/29,10/25",2016:"3/27,10/30",2017:"3/26,10/29",2018:"3/25,10/28",2019:"3/31,10/27"}
};
h.obtainPageLoadTime=function(){h.data.loadTime=s.getPageLoadTime()
};
h.obtainData=function(){var c=new Date();
h.data=$(g).data();
h.data.localTime=h.getLocalTime(c);
h.data.globalTime=h.getGlobalTime(c);
h.obtainDataFromReferrer();
h.obtainDataFromPlugins();
h.obtainDataFromURL();
h.getMediaMilestones();
h.handleErrorPages();
CQ_Analytics.EventDataMgr.data={};
CQ_Analytics.EventDataMgr.data.a={};
CQ_Analytics.EventDataMgr.data.a.media={};
for(var i in h.data){var j=h.data[i];
if(j){CQ_Analytics.PageDataMgr.addInitProperty(i,j)
}}};
h.handleErrorPages=function(){if(h.data.pageName.indexOf(a)!==-1){h.data.pageType="errorPage";
h.data.pageName="error-page|"+document.location.href
}};
h.setCookie=function(j,c){if($.cookie(j)){return false
}var i={path:"/"};
if(c){i.expires=c
}$.cookie(j,"true",i);
return true
};
h.pad=function(c){var i=Math.abs(Math.floor(c));
return(i<10?"0":"")+i
};
h.getGlobalTime=function(i){var k=h.pad(i.getHours()+i.getTimezoneOffset()/60);
var c=h.pad(i.getMinutes());
var j=h.pad(i.getSeconds());
var n=h.pad(i.getFullYear());
var o=h.pad(i.getMonth());
var l=h.pad(i.getDate());
return k+":"+c+":"+j+" | "+l+":"+o+":"+n
};
h.getLocalTime=function(i){var k=h.pad(i.getHours());
var c=h.pad(i.getMinutes());
var j=h.pad(i.getSeconds());
var n=h.pad(i.getFullYear());
var o=h.pad(i.getMonth());
var l=h.pad(i.getDate());
return k+":"+c+":"+j+" | "+l+":"+o+":"+n
};
h.init=function(){if(typeof CQ_Analytics==="undefined"){return
}shell.registerComponent(h);
h.obtainData();
$(window).load(function(){if(shell.hasComponent("siteCatalystOverlay")){shell.components.siteCatalystOverlay.trackPageView(h.data.pageName)
}})
};
h.init()
})();